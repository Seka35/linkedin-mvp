# üöÄ PROTOTYPE MVP - LINKEDIN AUTOMATION

## üìã PLAN D'EX√âCUTION PAR PHASES

**Objectif :** Cr√©er un prototype simple, gratuit, fonctionnel en Python avec interface web basique pour automatiser LinkedIn (scraping + connexions + commentaires + DMs).

---

# PHASE 7 : TESTS & VALIDATION

## Objectif
Tester l'ensemble du syst√®me de bout en bout.

## Instructions pour l'IA

### 7.1 Cr√©er un script de test `test_system.py` :

```python
"""
Script de test du syst√®me complet.
"""

import sys
import os

# Ajouter au path
sys.path.insert(0, os.path.dirname(__file__))

from dotenv import load_dotenv
load_dotenv()

from database import init_db, SessionLocal, Prospect, Campaign, Action
from services.scraper import LinkedInScraper
from services.linkedin_bot import LinkedInBot

def test_database():
    """Tester la base de donn√©es"""
    print("\nüß™ Test 1: Base de donn√©es")
    
    init_db()
    db = SessionLocal()
    
    # Cr√©er un prospect de test
    test_prospect = Prospect(
        linkedin_url="https://linkedin.com/in/test-user",
        full_name="Test User",
        headline="CEO",
        source="test"
    )
    
    db.add(test_prospect)
    db.commit()
    
    # V√©rifier
    count = db.query(Prospect).count()
    print(f"‚úÖ Base de donn√©es OK ({count} prospects)")
    
    db.close()

def test_scraper():
    """Tester le scraper"""
    print("\nüß™ Test 2: Scraper")
    
    scraper = LinkedInScraper()
    
    # Test Google Dork
    results = scraper.google_dork_search("CEO Paris", max_results=5)
    
    if len(results) > 0:
        print(f"‚úÖ Scraper OK ({len(results)} r√©sultats)")
        print(f"Exemple: {results[0]}")
    else:
        print("‚ö†Ô∏è Aucun r√©sultat trouv√©")

def test_bot_connection():
    """Tester la connexion du bot"""
    print("\nüß™ Test 3: Bot LinkedIn (connexion)")
    
    bot = LinkedInBot(headless=False)
    
    try:
        bot.start()
        print("‚úÖ Bot connect√© √† LinkedIn")
        bot.stop()
    except Exception as e:
        print(f"‚ùå Erreur connexion bot: {e}")

def run_all_tests():
    """Lancer tous les tests"""
    print("=" * 50)
    print("üß™ TESTS DU SYST√àME")
    print("=" * 50)
    
    test_database()
    test_scraper()
    
    # Test bot seulement si credentials pr√©sents
    if os.getenv('LINKEDIN_EMAIL') and os.getenv('LINKEDIN_PASSWORD'):
        test_bot_connection()
    else:
        print("\n‚ö†Ô∏è Test 3: Skipped (pas de credentials LinkedIn)")
    
    print("\n" + "=" * 50)
    print("‚úÖ Tests termin√©s!")
    print("=" * 50)

if __name__ == '__main__':
    run_all_tests()
```

### 7.2 Instructions de test manuel :

```markdown
# üìù CHECKLIST DE TEST

## Test 1: Installation
- [ ] `pip install -r requirements.txt` fonctionne
- [ ] `playwright install chromium` fonctionne
- [ ] `.env` cr√©√© et rempli
- [ ] `python test_system.py` passe tous les tests

## Test 2: Base de donn√©es
- [ ] Fichier `data/prospects.db` cr√©√©
- [ ] Tables cr√©√©es (prospects, campaigns, actions)

## Test 3: Scraping
- [ ] Recherche Google Dork retourne des r√©sultats
- [ ] URLs LinkedIn extraites correctement
- [ ] Prospects ajout√©s en base

## Test 4: Interface Web
- [ ] `python main.py` d√©marre l'app
- [ ] http://localhost:5000 accessible
- [ ] Dashboard affiche stats
- [ ] Page Prospects liste les prospects
- [ ] Page Campagnes accessible

## Test 5: Bot LinkedIn
- [ ] Login LinkedIn r√©ussit
- [ ] Visite d'un profil fonctionne
- [ ] Demande de connexion s'envoie
- [ ] Message direct s'envoie
- [ ] Commentaire sur post fonctionne

## Test 6: Workflow complet
1. [ ] Rechercher prospects via Dashboard
2. [ ] Voir prospects ajout√©s sur page Prospects
3. [ ] Envoyer demande de connexion manuelle
4. [ ] V√©rifier action logg√©e dans Dashboard
5. [ ] Cr√©er une campagne
6. [ ] Lancer campagne et voir actions

## Probl√®mes courants

**Playwright error:**
‚Üí `playwright install chromium`

**Import error:**
‚Üí V√©rifier PYTHONPATH et structure dossiers

**LinkedIn login fail:**
‚Üí Tester manuellement, v√©rifier 2FA

**Scraping returns empty:**
‚Üí Google peut bloquer, essayer avec proxy
```

## Livrables de Phase 7
- [ ] Script test_system.py cr√©√©
- [ ] Tous les tests passent
- [ ] Documentation de test cr√©√©e
- [ ] Syst√®me valid√© et fonctionnel
